BitOS - The operating system for the BitMachine SH7058 emulator 
===============================================================

Copyright (C) Enable Software Pty Ltd 2014

BitOS is a very basic newlib based operating system. BitMachine is browser based emulator that emulates a basic SH7058 "like" computer.

The operating system emulates file I/O, graphics, keyboard, mouse and sound. The most significant thing is can do is recompile itself using GCC (sans newlib).

It was hacked together to excerise the BitMachine SH7058 instruction set emulation.

Please refer to LICENSE for software license details for all files except those listed below:

libbitmachine/argv.c   - Copyright (C) 1992, 2001 Free Software Foundation, Inc (GNU Library General Public License v2 - LICENSES/LGPL-2.0.txt)
libbitmachine/malloc.c - Written by Doug Lea and released to the public domain
newlib-2.0.0-r/*       - Copyright (C) 1991 Free Software Foundation, Inc. (GNU LIBRARY GENERAL PUBLIC LICENSE v2 - newlib-2.0.0-r/COPYING)
apps/wolf/wolf.cpp     - Copyright (c) 2004-2007, Lode Vandevenne. (Simplified BSD License)
apps/wolf/media/*      - Copyright (C) Id Software, Inc. (LIMITED USE SOFTWARE LICENSE AGREEMENT - apps/wolf/media/LICENSE.DOC)
apps/bemacs/*          - Various authors, released to the public domain (apps/bemacs/README.original)
apps/bemacs/dirname.c  - Copyright (C) 2001 Matt Kraai. (GNU General Public License v2 LICENSES/gpl-2.0.txt)
bin2c.c                - Written by sandro AT sigala DOT it - BEER-WARE LICENSE

If you are distributing this software, the safest course of action would be to distribute it under the terms of the GNU GENERAL PUBLIC LICENSE v3 (LICENSES/gpl-3.0.txt) with all of the above copyright notices and licenses included in some form of documenation or similar (To meet the conditions of the BSD licensed stuff).

Notes:
------
o Built on OSX Mavericks 10.10.3 and OSX El Capitan 10.11.1
o Don't cut&paste - untested
o * indicates a non terminal command
o You need a google drive with a folder called ~/Google Drive/BitFS that syncs from your build machine

*Install xcode from app store

#(1) install xcode command line tools
#====================================
xcode-select --install
mkdir ~/Projects
mkdir ~/Projects/bitos-build/
mkdir ~/Projects/bitos-build/src
cd ~/Projects
git clone https://github.com/alpine9000/BitOS.git

#(2) install wget
#================
cd ~/Projects/BitOS/external
sudo make -f wget.mk

#(3) osx gcc (5.3.0)
#===================
cd ~/Projects/BitOS/external
sudo make -f gcc-5.3.0.osx.mk

#(4) sh-elf cross bintuils
#=========================
cd ~/Projects/BitOS/external
sudo make -f binutils.cross.mk

#(5) sh-elf cross gcc (5.3.0) stage 1
#====================================
cd ~/Projects/BitOS/external
sudo make -f gcc-5.3.0.cross.stage1.mk

#(6) newlib 2.0.0
#================
cd ~/Projects/BitOS/external
sudo make -f newlib-2.0.0.mk

#(7) sh-elf cross gcc (5.3.0) stage 2
#====================================
cd ~/Projects/BitOS/external
sudo make -f gcc-5.3.0.cross.stage2.mk

#(8) BitOS stage 1
#=================
cd ~/Projects/BitOS
make elf
sudo ln -sf /Users/alex/Projects/BitOS/libbitmachine/crt1.o /usr/local/sh-elf/lib/gcc/sh-elf/5.3.0/m2e/crt1.o
sudo ln -sf /Users/alex/Projects/BitOS/libbitmachine/crtbegin.o /usr/local/sh-elf/lib/gcc/sh-elf/5.3.0/m2e/crtbegin.o 
sudo ln -sf /Users/alex/Projects/BitOS/libbitmachine/crtend.o /usr/local/sh-elf/lib/gcc/sh-elf/5.3.0/m2e/crtend.o
sudo ln -sf /Users/alex/Projects/BitOS/libbitmachine/crti.o /usr/local/sh-elf/lib/gcc/sh-elf/5.3.0/m2e/crti.o 
sudo ln -sf /Users/alex/Projects/BitOS/libbitmachine/crtn.o /usr/local/sh-elf/lib/gcc/sh-elf/5.3.0/m2e/crtn.o

#(9) readline
#============
cd ~/Projects/BitOS/external
sudo make -f readline-6.3.mk

#(10) BitOS stage 2
#===================
cd ~/Projects/BitOS
make 

(11) gcc.bitos (5.3.0)
======================
cd ~/Projects/BitOS/external
make -fgcc-5.3.0.bitos.mk

(12) bintuils.bitos
===================
cd ~/Projects/BitOS/external
make -f binutils.bitos.mk

(13) make
=========
cd ~/Projects/BitOS/external
make -f make-4.1.mk

(14) make filesystem.zip
===================
cd ~/Projects/BitOS
make filesystem

(15) Setting local filesystem
=============================
* Navigate to https://alpine9000.github.io/BitMachine/ (Chrome works best)
* Menu "Drive" -> "Initialise Filesystem from Google Grive"

(16) Rebuild bitos in BitMachine
================================
* Navigate to https://alpine9000.github.io/BitMachine/ (Chrome works best)
* Menu "Drive" -> "Boot BitOS from Google Drive"
cd /usr/local/src/BitOS
make elf
* Menu "Drive" -> "Boot BitOS from Local"

You are now running bitos built on bitos (-:

(17) Make a change to the OS
============================
* Navigate to https://alpine9000.github.io/BitMachine/ (Chrome works best)
* Menu "Drive" -> "Boot BitOS from Google Drive"
bemacs /usr/local/src/BitOS/libbitmachine/shell.c (Change the version function to print something else)
* Follow previous step (Rebuild bitos in BitMachine)
version

Other Things To Try
===================

bemacs - emacs "like" editor (Ersatz emacs - https://github.com/stangelandcl/ersatz-emacs)
rwolf - simple raycasting demo (http://lodev.org/cgtutor/raycasting.html)
si - Start of a Space Invaders tribute
ps - See some process information
free - See some memory usage stats
ls/dir/cat/rm/mkdir/pwd/mv/cp - simple unix commands
kernel - boot a new kernel

Some BitMachine stuff to try from the javascript console
========================================================
kernel.init() // Enable memory checking and stack tracing
kernel.PrintThreadTable() // Prints information about the running threads
kernel.kernel.DumpStack() // Shows the stack traces of each thread







